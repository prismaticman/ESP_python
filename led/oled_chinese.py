#无法在vscode打开使用
#请使用Thonny打开并添加ssd1306.py

from machine import Pin, I2C
import time

#OLED=....
i2c = I2C(scl=Pin(5), sda=Pin(4),freq = 400000)
from ssd1306 import SSD1306_I2C 
OLED= SSD1306_I2C(128, 64, i2c)

#fonts=....
# 确定程序中要显示哪些中文，例如项目的项
# 找到对应的编码值，此时是项UTF-80xe79bae
# 通过特殊软件，制作要显示的样子项

#字库文件
fonts= {
        0xE4BDA0:
        [0x08,0x08,0x08,0x11,0x11,0x32,0x34,0x50,0x91,0x11,0x12,0x12,0x14,0x10,0x10,0x10,
        0x80,0x80,0x80,0xFE,0x02,0x04,0x20,0x20,0x28,0x24,0x24,0x22,0x22,0x20,0xA0,0x40], #/*"你",0*/
        0xE5A5BD:
        [0x10,0x10,0x10,0x10,0xFC,0x24,0x24,0x25,0x24,0x48,0x28,0x10,0x28,0x44,0x84,0x00,
        0x00,0xFC,0x04,0x08,0x10,0x20,0x20,0xFE,0x20,0x20,0x20,0x20,0x20,0x20,0xA0,0x40],#/*"好",1*/
        0xE5958A:
        [0x00,0x0E,0xEA,0xAA,0xAA,0xAA,0xAC,0xAA,0xAA,0xAA,0xEA,0xAA,0x0C,0x08,0x08,0x08,
        0x00,0xFC,0x08,0x08,0xE8,0xA8,0xA8,0xA8,0xA8,0xA8,0xE8,0xA8,0x08,0x08,0x28,0x10],#/*"啊",2*/
        0xE68891:
        [0x04,0x0E,0x78,0x08,0x08,0xFF,0x08,0x08,0x0A,0x0C,0x18,0x68,0x08,0x08,0x2B,0x10,
        0x40,0x50,0x48,0x48,0x40,0xFE,0x40,0x44,0x44,0x48,0x30,0x22,0x52,0x8A,0x06,0x02],#/*"我",3*/
        0xE79A84:
        [0x10,0x10,0x20,0x7E,0x42,0x42,0x43,0x42,0x7E,0x42,0x42,0x42,0x42,0x7E,0x42,0x00,
        0x40,0x40,0x40,0x7C,0x84,0x84,0x04,0x44,0x24,0x24,0x04,0x04,0x04,0x04,0x28,0x10],#/*"的",4*/
        0xE69C8B:
        [0x00,0x3E,0x22,0x22,0x22,0x3E,0x22,0x22,0x22,0x3E,0x22,0x22,0x22,0x42,0x4A,0x85,
        0x00,0x7C,0x44,0x44,0x44,0x7C,0x44,0x44,0x44,0x7C,0x44,0x44,0x44,0x84,0x94,0x08],#/*"朋",5*/
        0xE58F8B:
        [0x02,0x02,0x02,0xFF,0x04,0x04,0x0F,0x0A,0x12,0x11,0x21,0x40,0x81,0x06,0x18,0x60,
        0x00,0x00,0x00,0xFE,0x00,0x00,0xF0,0x10,0x10,0x20,0x40,0x80,0x40,0x20,0x18,0x06],#/*"友",6*/

}

#函数部分
def chinese(ch_str, x_axis, y_axis): 
   offset_ = 0 
   for k in ch_str: 
       code = 0x00  # 将中文转成16进制编码 
       data_code = k.encode("utf-8")
       code |= data_code[0] << 16
       code |= data_code[1] << 8
       code |= data_code[2]
       byte_data = fonts[code]
       for y in range(0, 16):
           a_ = bin(byte_data[y]).replace('0b', '')
           while len(a_) < 8:
               a_ = '0'+ a_
           b_ = bin(byte_data[y+16]).replace('0b', '')
           while len(b_) < 8:
               b_ = '0'+ b_
           for x in range(0, 8):
               OLED.pixel(x_axis + offset_ + x,    y+y_axis, int(a_[x]))   
               OLED.pixel(x_axis + offset_ + x +8, y+y_axis, int(b_[x]))   
       offset_ += 16
#显示汉字
chinese('你好啊我的朋友',8,16) 
OLED.show()
#显示英文字符串
OLED.text('hello my friend!',4,48)
OLED.show()

